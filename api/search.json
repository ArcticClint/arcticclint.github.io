[{"id":"f0a9f68103bafda08057b264814a6ae9","title":"图片转字符","content":"usage: python pic2str.py xxx.jpg\nClick to see code\n# coding:utf-8  \n\n#  为一张图片生成对应的字符集图片  \n\nimport Image  \nimport argparse  \n\n# 命令行输入参数处理  \nparser = argparse.ArgumentParser()  \n\nparser.add_argument('file')     # 输入文件  \nparser.add_argument('-o', '--output')   # 输出文件  \nparser.add_argument('--width', type=int, default=140) # 输出字符画宽  \nparser.add_argument('--height', type=int, default=90) # 输出字符画高  \n\n# 获取参数  \nargs = parser.parse_args()  \n\nIMG = args.file  \nWIDTH = args.width  \nHEIGHT = args.height  \nOUTPUT = args.output  \n\nascii_char = list(\"$@B%8&amp;WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/\\|()1&#123;&#125;[]?-_+~&lt;>i!lI;:,\\\"^`'. \")  \n\n\n# 将256灰度映射到70个字符上  \ndef get_char(r, b, g, alpha=256):  \n    if alpha == 0:  \n        return ' '  \n    length = len(ascii_char)  \n    gray = int(0.2126 * r + 0.7152 * g + 0.0722 * b)  \n\n    unit = (256.0 + 1)/length  \n    return ascii_char[int(gray/unit)]  \n\nif __name__ == '__main__':  \n\n    im = Image.open(IMG)  \n    im = im.resize((WIDTH, HEIGHT), Image.NEAREST)  \n\n    txt = \"\"  \n\n    for i in range(HEIGHT):  \n        for j in range(WIDTH):  \n            txt += get_char(*im.getpixel((j, i)))  \n        txt += '\\n'  \n\n    print txt  \n\n    # 字符画输出到文件  \n    if OUTPUT:  \n        with open(OUTPUT,'w') as f:  \n            f.write(txt)  \n    else:  \n        with open(\"output.txt\", 'w') as f:  \n            f.write(txt) \n\n\n\n","slug":"pic2str","date":"2020-08-15T10:49:36.000Z","categories_index":"python","tags_index":"tools","author_index":"ArcticTime"}]